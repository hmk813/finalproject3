<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="receive">

	<insert id="insert" parameterType="ReceiveDto">
		insert into receive(
			receive_no, staff_id, patient_no, receive_date, receive_time  
		)
		values(receive_seq.nextval, #{staffId}, 
		#{patientNo}, to_date(sysdate, 'YYYY-MM-DD'), to_date(sysdate, 'HH24:MI:SS'))
	</insert>

	<!--  목록 조회 -->
	<select id="list" resultType="PatientReceiveListVO">
		select
	    P.*, 
	    R.staff_id, receive_date
	    from patient P
	    join receive R
	    on P.patient_no = R.patient_no;
	</select> 
	
	<!--  단일 조회 -->
	<select id="selectlist" resultType="PatientReceiveListVO" parameterType="int">
		select * from patient where patient_no = #{patient_no}
	</select>
</mapper>
